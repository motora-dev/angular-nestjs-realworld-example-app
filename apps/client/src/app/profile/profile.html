<ng-container *rxLet="profile$; let profile">
  @if (profile) {
    <div class="min-h-screen bg-gray-50">
      <!-- User Info -->
      <ng-container *rxLet="currentUser$; let currentUser">
        <app-user-info
          [profile]="profile"
          [isCurrentUser]="currentUser?.username === profile.username"
          (toggleFollow)="onToggleFollowing(profile)"
        />
      </ng-container>

      <!-- Articles Toggle -->
      <div class="container mx-auto px-4 py-8">
        <div class="mx-auto max-w-3xl">
          <div class="mb-6 border-b border-gray-200">
            <nav class="-mb-px flex gap-4">
              <button
                class="border-b-2 px-4 py-2 text-sm font-medium transition-colors"
                [class.border-emerald-500]="activeTab() === 'posts'"
                [class.text-emerald-600]="activeTab() === 'posts'"
                [class.border-transparent]="activeTab() !== 'posts'"
                [class.text-gray-500]="activeTab() !== 'posts'"
                (click)="loadArticles('posts')"
              >
                {{ 'profile.myArticles' | translate }}
              </button>
              <button
                class="border-b-2 px-4 py-2 text-sm font-medium transition-colors"
                [class.border-emerald-500]="activeTab() === 'favorites'"
                [class.text-emerald-600]="activeTab() === 'favorites'"
                [class.border-transparent]="activeTab() !== 'favorites'"
                [class.text-gray-500]="activeTab() !== 'favorites'"
                (click)="loadArticles('favorites')"
              >
                {{ 'profile.favoritedArticles' | translate }}
              </button>
            </nav>
          </div>

          <!-- Articles List -->
          <ng-container *rxLet="articles$; let articles">
            @if (articles.length === 0) {
              <div class="rounded-lg border border-gray-200 bg-white p-8 text-center text-gray-500">
                {{ 'profile.noArticles' | translate }}
              </div>
            } @else {
              <div class="space-y-4">
                @for (article of articles; track article.slug) {
                  <article class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
                    <a [routerLink]="['/article', article.slug]" class="block">
                      <h2 class="mb-2 text-xl font-semibold text-gray-900 hover:text-emerald-600">
                        {{ article.title }}
                      </h2>
                      <p class="text-gray-600">{{ article.description }}</p>
                    </a>
                  </article>
                }
              </div>
            }
          </ng-container>
        </div>
      </div>
    </div>
  }
</ng-container>

